{"ast":null,"code":"var _jsxFileName = \"/home/billywonka/Coding/Coursework/Ironhack/Week8 - Trip-Packer/react-frontend/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { Route, Switch } from 'react-router-dom';\nimport TripIndex from './components/trips/TripIndex.js';\nimport TripDetails from './components/trips/TripDetails.js';\nimport Signup from './components/Signup.js';\nimport Login from './components/Login.js'; // import AuthService from './services/AuthService.js';\n\nimport Navbar from './components/Navbar.js';\nimport axios from 'axios';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAllTrips = () => {\n      axios.get(\"http://localhost:5000/api/trips\", {\n        withCredentials: true\n      }).then(responseFromApi => {\n        console.log(responseFromApi, '----response----');\n        this.setState({\n          listOfTrips: responseFromApi.data,\n          ready: true\n        });\n      });\n    };\n\n    this.getCurrentlyLoggedInUser = () => {\n      // this.service.currentUser()\n      axios.get('http://localhost:5000/api/auth/getcurrentuser', {\n        withCredentials: true\n      }).then(response => {\n        // console.log('fetching the user now')\n        let theUser = response.data;\n        this.setState({\n          currentlyLoggedIn: theUser\n        });\n        return theUser;\n      }).catch(() => {\n        this.setState({\n          currentlyLoggedIn: null\n        });\n      });\n    };\n\n    this.toggleForm = whichForm => {\n      let theForm;\n\n      if (whichForm === \"signup\") {\n        theForm = 'signupShowing';\n      } else {\n        theForm = 'loginShowing';\n      }\n\n      this.setState({\n        [theForm]: !this.state[theForm]\n      });\n    };\n\n    this.logout = () => {\n      axios.post('http://localhost:5000/api/auth/logout', {}, {\n        withCredentials: true\n      }).then(response => {\n        console.log(response);\n        this.getCurrentlyLoggedInUser();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.state = {\n      listOfTrips: [],\n      currentlyLoggedIn: null,\n      ready: false,\n      signupShowing: false,\n      loginShowing: false\n    }; // this.service = new AuthService();\n  }\n\n  componentDidMount() {\n    this.getAllTrips();\n    this.getCurrentlyLoggedInUser(); // this.getGeocodeKey();\n  }\n\n  render() {\n    console.log('=-=-=-=-=-=-=-', this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      theUser: this.state.currentlyLoggedIn // pleaseLogOut = {()=> this.service.logout()}\n      ,\n      pleaseLogOut: this.logout,\n      toggleForm: this.toggleForm,\n      getUser: this.getCurrentlyLoggedInUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), this.state.signupShowing && React.createElement(Signup, {\n      getUser: this.getCurrentlyLoggedInUser,\n      toggleForm: this.toggleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), this.state.loginShowing && React.createElement(Login, {\n      getUser: this.getCurrentlyLoggedInUser,\n      toggleForm: this.toggleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/api/trips\",\n      render: props => React.createElement(TripIndex, Object.assign({}, props, {\n        allTheTrips: this.state.listOfTrips,\n        getData: this.getAllTrips,\n        ready: this.state.ready,\n        theUser: this.state.currentlyLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/api/trips/:theID\",\n      render: props => React.createElement(TripDetails, Object.assign({}, props, {\n        allTheTrips: this.state.listOfTrips,\n        ready: this.state.ready,\n        getData: this.getAllTrips,\n        theUser: this.state.currentlyLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/billywonka/Coding/Coursework/Ironhack/Week8 - Trip-Packer/react-frontend/src/App.js"],"names":["React","Route","Switch","TripIndex","TripDetails","Signup","Login","Navbar","axios","App","Component","constructor","props","getAllTrips","get","withCredentials","then","responseFromApi","console","log","setState","listOfTrips","data","ready","getCurrentlyLoggedInUser","response","theUser","currentlyLoggedIn","catch","toggleForm","whichForm","theForm","state","logout","post","err","signupShowing","loginShowing","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport {Route, Switch} from 'react-router-dom';\n\nimport TripIndex from './components/trips/TripIndex.js'\nimport TripDetails from './components/trips/TripDetails.js';\n\nimport Signup from './components/Signup.js';\nimport Login from './components/Login.js';\n// import AuthService from './services/AuthService.js';\n\nimport Navbar from './components/Navbar.js'\n\nimport axios from 'axios';\n\n\nclass App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      listOfTrips: [],\n      currentlyLoggedIn: null,\n      ready: false,\n      signupShowing: false,\n      loginShowing: false,\n    };\n\n    // this.service = new AuthService();\n  }\n\n  getAllTrips = () => {\n    axios.get(`http://localhost:5000/api/trips`, {withCredentials: true})\n    .then(responseFromApi => {\n      console.log(responseFromApi, '----response----')\n      this.setState({\n        listOfTrips: responseFromApi.data, ready: true\n      })\n    })\n  }\n\n  getCurrentlyLoggedInUser = () =>{\n    // this.service.currentUser()\n    axios.get('http://localhost:5000/api/auth/getcurrentuser', {withCredentials: true})\n    .then((response)=>{\n      // console.log('fetching the user now')\n      let theUser = response.data;\n      this.setState({currentlyLoggedIn: theUser})\n      return theUser;\n    })\n    .catch(()=>{\n      this.setState({currentlyLoggedIn: null})\n    })\n  }\n\n  toggleForm = (whichForm) =>{\n    let theForm;\n\n    if(whichForm === \"signup\"){\n      theForm = 'signupShowing'\n    } else {\n      theForm = 'loginShowing'\n    }\n    this.setState({[theForm]: !this.state[theForm]})\n  }\n\n  componentDidMount() {\n      this.getAllTrips();\n      this.getCurrentlyLoggedInUser();\n      // this.getGeocodeKey();\n  }\n\n  logout = () =>{\n    axios.post('http://localhost:5000/api/auth/logout', {}, {withCredentials: true})\n    .then((response)=>{\n      console.log(response);\n      this.getCurrentlyLoggedInUser();  \n    })\n    .catch((err)=>{\n      console.log(err)\n    })\n  }\n\n  render(){\n    console.log('=-=-=-=-=-=-=-',this.state);\n\n    return (\n      <div>\n        <Navbar \n          theUser = {this.state.currentlyLoggedIn} \n          // pleaseLogOut = {()=> this.service.logout()}\n          pleaseLogOut = {this.logout}\n          toggleForm = {this.toggleForm}\n          getUser = {this.getCurrentlyLoggedInUser}\n        />\n\n        {this.state.signupShowing && \n          <Signup getUser = {this.getCurrentlyLoggedInUser}\n            toggleForm = {this.toggleForm}\n          />\n        }\n\n        {this.state.loginShowing && \n          <Login getUser = {this.getCurrentlyLoggedInUser}\n            toggleForm = {this.toggleForm}\n          />\n        }\n\n        <Switch>\n          <Route exact path=\"/api/trips\" render ={(props)=> \n            <TripIndex\n              {...props} \n              allTheTrips ={this.state.listOfTrips}\n              getData = {this.getAllTrips}\n              ready = {this.state.ready}\n              theUser = {this.state.currentlyLoggedIn}\n            />}\n          />\n\n          <Route exact path=\"/api/trips/:theID\" render ={(props)=> \n            <TripDetails\n              {...props} \n              allTheTrips ={this.state.listOfTrips}\n              ready = {this.state.ready}\n              getData = {this.getAllTrips}\n              theUser = {this.state.currentlyLoggedIn}\n            />} \n          />\n        </Switch>\n        \n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}