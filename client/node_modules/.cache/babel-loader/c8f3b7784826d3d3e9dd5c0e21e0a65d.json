{"ast":null,"code":"var _jsxFileName = \"/home/billywonka/Coding/Coursework/Ironhack/Week8 - Trip-Packer/react-frontend/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { Route, Link, Switch } from 'react-router-dom';\nimport ProjectIndex from './components/projectindex/ProjectIndex.js';\nimport Signup from './components/Signup.js';\nimport Login from './components/Login.js';\nimport AuthService from './services/AuthService.js';\nimport Navbar from './components/Navbar.js';\nimport axios from 'axios';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAllItems = () => {\n      axios.get(\"http://localhost:5000/api/items\", {\n        withCredentials: true\n      }).then(responseFromApi => {\n        this.setState({\n          listOfItems: responseFromApi.data,\n          ready: true\n        });\n      });\n    };\n\n    this.getCurrentlyLoggedInUser = () => {\n      this.service.currentUser().then(theUser => {\n        this.setState({\n          currentlyLoggedIn: theUser\n        });\n      }).catch(() => {\n        this.setState({\n          currentlyLoggedIn: null\n        });\n      });\n    };\n\n    this.toggleForm = whichForm => {\n      let theForm;\n\n      if (whichForm === \"signup\") {\n        theForm = 'signupShowing';\n      } else {\n        theForm = 'loginShowing';\n      }\n\n      this.setState({\n        [theForm]: !this.state[theForm]\n      });\n    };\n\n    this.state = {\n      listOfItems: [],\n      currentlyLoggedIn: null,\n      ready: false,\n      signupShowing: false,\n      loginShowing: false\n    };\n    this.service = new AuthService();\n  }\n\n  componentDidMount() {\n    // this.getAllItems();\n    this.getCurrentlyLoggedInUser();\n  }\n\n  render() {\n    console.log('=-=-=-=-=-=-=-', this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      theUser: this.state.currentlyLoggedIn,\n      pleaseLogOut: () => this.service.logout(),\n      toggleForm: this.toggleForm,\n      getUser: this.getCurrentlyLoggedInUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), this.state.signupShowing && React.createElement(Signup, {\n      getUser: this.getCurrentlyLoggedInUser,\n      toggleForm: this.toggleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), this.state.loginShowing && React.createElement(Login, {\n      getUser: this.getCurrentlyLoggedInUser,\n      toggleForm: this.toggleForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/items\",\n      render: props => React.createElement(ProjectIndex, Object.assign({}, props, {\n        theUser: this.state.currentlyLoggedIn,\n        allTheItems: this.state.listOfItems,\n        getData: this.getAllItems,\n        ready: this.state.ready,\n        theUser: this.state.currentlyLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/items/:theID\",\n      render: props => React.createElement(ProjectDetails, Object.assign({}, props, {\n        allTheItems: this.state.listOfItems,\n        ready: this.state.ready,\n        getData: this.getAllItems,\n        theUser: this.state.currentlyLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/billywonka/Coding/Coursework/Ironhack/Week8 - Trip-Packer/react-frontend/src/App.js"],"names":["React","Route","Link","Switch","ProjectIndex","Signup","Login","AuthService","Navbar","axios","App","Component","constructor","props","getAllItems","get","withCredentials","then","responseFromApi","setState","listOfItems","data","ready","getCurrentlyLoggedInUser","service","currentUser","theUser","currentlyLoggedIn","catch","toggleForm","whichForm","theForm","state","signupShowing","loginShowing","componentDidMount","render","console","log","logout"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport {Route, Link, Switch} from 'react-router-dom';\n\nimport ProjectIndex from './components/projectindex/ProjectIndex.js'\nimport Signup from './components/Signup.js';\nimport Login from './components/Login.js';\nimport AuthService from './services/AuthService.js';\n\nimport Navbar from './components/Navbar.js'\n\nimport axios from 'axios';\n\n\nclass App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = { \n      listOfItems: [],\n      currentlyLoggedIn: null,\n      ready: false,\n      signupShowing: false,\n      loginShowing: false,\n    };\n\n    this.service = new AuthService();\n  }\n\n  getAllItems = () => {\n    axios.get(`http://localhost:5000/api/items`, {withCredentials: true})\n    .then(responseFromApi => {\n      this.setState({\n        listOfItems: responseFromApi.data, ready: true\n      })\n    })\n  }\n\n  getCurrentlyLoggedInUser = () =>{\n    this.service.currentUser()\n    .then((theUser)=>{\n      this.setState({currentlyLoggedIn: theUser})\n    })\n    .catch(()=>{\n      this.setState({currentlyLoggedIn: null})\n    })\n  }\n\n  toggleForm = (whichForm) =>{\n    let theForm;\n\n    if(whichForm === \"signup\"){\n      theForm = 'signupShowing'\n    } else {\n      theForm = 'loginShowing'\n    }\n\n    this.setState({[theForm]: !this.state[theForm]})\n  }\n\n  componentDidMount() {\n      // this.getAllItems();\n      this.getCurrentlyLoggedInUser();\n  }\n\n  render(){\n    console.log('=-=-=-=-=-=-=-',this.state);\n\n    return (\n      <div>\n        <Navbar \n        theUser = {this.state.currentlyLoggedIn} \n        pleaseLogOut = {()=> this.service.logout()}\n        toggleForm = {this.toggleForm}\n        getUser = {this.getCurrentlyLoggedInUser}\n        />\n\n        {this.state.signupShowing && \n          <Signup getUser = {this.getCurrentlyLoggedInUser}\n          toggleForm = {this.toggleForm}\n          />\n        }\n\n        {this.state.loginShowing && \n          <Login getUser = {this.getCurrentlyLoggedInUser}\n          toggleForm = {this.toggleForm}\n          />\n        }\n\n        <Switch>\n          <Route exact path=\"/items\" render ={(props)=> <ProjectIndex\n          {...props} \n          theUser = {this.state.currentlyLoggedIn} \n          allTheItems ={this.state.listOfItems}\n          getData = {this.getAllItems}\n          ready = {this.state.ready}\n          theUser = {this.state.currentlyLoggedIn}\n          />} />\n\n          <Route exact path=\"/items/:theID\" render ={(props)=> <ProjectDetails\n          {...props} \n          allTheItems ={this.state.listOfItems}\n          ready = {this.state.ready}\n          getData = {this.getAllItems}\n          theUser = {this.state.currentlyLoggedIn}\n          />} />\n        </Switch>\n        \n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}